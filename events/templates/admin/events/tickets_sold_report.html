{% extends "admin/base_site.html" %}
{% load i18n admin_urls %}

{% block content %}
<div id="content-main">
    
    {% if results %}
        <div class="results">
            <table>
                <thead>
                    <tr>
                        <th>Evento</th>
                        <th>Fecha de Inicio</th>
                        <th>Fecha de Fin</th>
                        <th>Máximo de Tickets</th>
                        <th>Tickets Vendidos</th>
                        <th>% Vendido</th>
                        <th>Total de Órdenes</th>
                        <th>Ingreso por Entradas</th>
                        <th>Donaciones Arte</th>
                        <th>Donaciones Sede</th>
                        <th>Donaciones Beca</th>
                        <th>Ingresos Totales</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in results %}
                        <tr>
                            <td><strong>{{ row.1 }}</strong></td>
                            <td>{{ row.2|date:"d/m/Y H:i" }}</td>
                            <td>{{ row.3|date:"d/m/Y H:i" }}</td>
                            <td>
                                {% if row.4 %}
                                    {{ row.4 }}
                                {% else %}
                                    <em>Sin límite</em>
                                {% endif %}
                            </td>
                            <td><strong>{{ row.5 }}</strong></td>
                            <td>
                                {% if row.4 %}
                                    {% widthratio row.5 row.4 100 %}%
                                {% else %}
                                    <em>N/A</em>
                                {% endif %}
                            </td>
                            <td>{{ row.11 }}</td>
                            <td>${{ row.6|floatformat:0 }}</td>
                            <td>${{ row.7|floatformat:0 }}</td>
                            <td>${{ row.8|floatformat:0 }}</td>
                            <td>${{ row.9|floatformat:0 }}</td>
                            <td><strong>${{ row.10|floatformat:0 }}</strong></td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
    {% else %}
        <p>No hay eventos disponibles.</p>
    {% endif %}
</div>

<style>
    .results table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }
    
    .results th,
    .results td {
        padding: 8px 12px;
        text-align: left;
        border-bottom: 1px solid var(--border-color, #ddd);
    }
    
    .results th {
        background-color: var(--header-bg, #f8f9fa);
        font-weight: bold;
        color: var(--header-fg, #000);
    }
    
    /* Removed hover effect for better readability */
    
    .results strong {
        color: var(--link-fg, #007cba);
    }
    
    /* Dark theme compatibility */
    @media (prefers-color-scheme: dark) {
        .results th {
            background-color: #2b2b2b;
            color: #fff;
        }
        
        /* Removed hover effect for better readability */
        
        .results th,
        .results td {
            border-bottom-color: #555;
        }
        
        .results strong {
            color: #4fc3f7;
        }
    }
    
</style>
{% endblock %}
